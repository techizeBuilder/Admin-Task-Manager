Prompt for Agent â€“ Sub-task Creation

You are a senior React + TypeScript developer working on the Tasksetu project.
Your task is to implement the Sub-task Creation feature inside the TaskView page, following the given specifications.

ğŸ“Œ Requirements

Sub-task Creation UI

Implement as an inline component (inside the parent taskâ€™s Subtasks tab).

Show a sub-task form row with these fields:

Sub-task Name â†’ mandatory text input, default "New Sub-task", max 60 chars, inline editable.

Assigned To â†’ mandatory searchable dropdown (default = self/creator).

Due Date â†’ mandatory date picker (default = parentâ€™s due date, cannot exceed parentâ€™s due date).

Priority â†’ optional dropdown (Low, Medium, High, Critical; default = Low).

Status â†’ mandatory dropdown (default = "To Do", options: To Do, In Progress, Blocked, Completed).

Visibility â†’ mandatory dropdown (default = inherit parentâ€™s visibility, allow override for org users).

Notes â†’ optional rich text editor.

Attachments â†’ optional file uploader with drag & drop support + version control.

Inheritance & Default Logic

Inherited by default: Visibility â†’ inherits parent taskâ€™s visibility.

Suggested from parent: Due date â†’ prefilled from parentâ€™s due date.

Independent fields: Priority & Assignee are independent (assignee = self by default).

Validation Rules

Sub-task must have a name, assignee, due date, status, and visibility.

Due date cannot exceed parentâ€™s due date â†’ show inline validation error if violated.

Enforce max 60 chars for name â†’ error message if exceeded.

Role-based Permissions

Only creator, assignee, manager, or admin can add/edit subtasks.

Unauthorized roles â†’ show disabled state with tooltip â€œYou donâ€™t have permissionâ€.

UX & Theming

Use Tailwind + shadcn/ui + lucide-react for design.

Keep UI lightweight, inline editable, and fast to create subtasks.

Add + Add Sub-task button â†’ opens inline editable row.

System Logic & Error Handling

Status transitions follow Task Status Management rules (no invalid jumps).

Attachments â†’ support versioning (previous file retrievable).

Show inline error if:

Due date exceeds parent.

Required field missing.

File upload fails.

Best Practices

Use React Query for fetching/updating sub-task data.

Keep components modular (SubtaskForm.tsx, SubtaskList.tsx, SubtaskItem.tsx).